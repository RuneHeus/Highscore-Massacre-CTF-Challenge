(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const h of t)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(t){const h={};return t.integrity&&(h.integrity=t.integrity),t.referrerPolicy&&(h.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?h.credentials="include":t.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function n(t){if(t.ep)return;t.ep=!0;const h=r(t);fetch(t.href,h)}})();const u={gameState:"start",score:0,highScore:0,baseSpeed:380,lastTime:0,obstacles:[],groundOffsetX:0,backgroundOffsetX:0,distanceSinceLastObstacle:0,obstacleDistance:500};function X(e,i){const r=60*e,n=40*e;return{x:250,y:i-r,width:n,height:r,hbOffsetX:(n-56)/2,hbOffsetY:0,hbWidth:56,hbHeight:117,vy:0,grounded:!0,jumping:!1,reachedMinJump:!1,jumpStartY:0,frameIndex:0,frameTimer:0}}function A(e,i){return e.frameTimer+=i*1e3,e.frameTimer>=100&&(e.frameIndex=(e.frameIndex+1)%7,e.frameTimer=0),{col:e.frameIndex%5,row:Math.floor(e.frameIndex/5)}}function W(e,i,r,n){e.vy+=n*i,e.y+=e.vy*i,e.jumping&&!e.reachedMinJump&&e.jumpStartY-e.y>=60&&(e.reachedMinJump=!0),e.y+e.height>=r.y&&(e.y=r.y-e.height,e.vy=0,e.grounded=!0,e.jumping=!1),e.y+=e.vy*i,e.y+e.height>=r.y&&(e.y=r.y-e.height,e.vy=0,e.grounded=!0,e.jumping=!1)}function x(e,i,r,n=1){if(Math.random()<.6){const o=.45*n,d=150*o,m=120*o;e.push({type:"campfire",x:i+40*n,y:r-m,width:d,height:m,frame:0,frameTimer:0,hbOffsetX:d*.25,hbOffsetY:m*.2,hbWidth:d*.5,hbHeight:m*.8})}else{const h=48*n,f=80*n,o=h,d=f;e.push({type:"tombstone",x:i+40*n,y:r-d,width:o,height:d,hbOffsetX:o*.25,hbOffsetY:d*.2,hbWidth:o*.5,hbHeight:d*.8})}}function P(e,i,r,n,t,h,f=1){for(let o=e.length-1;o>=0;o--){const d=e[o];if(d.x-=i*r,d.x+d.width<0){e.splice(o,1);continue}}n.distanceSinceLastObstacle+=i*r,n.distanceSinceLastObstacle>=n.obstacleDistance&&(x(e,t,h,f),n.distanceSinceLastObstacle=0,n.obstacleDistance=(450+Math.random()*300)*f)}function R(e,i,r){document.addEventListener("keydown",h=>{h.code==="Space"&&(e.gameState==="start"?(r(),e.gameState="running"):e.gameState==="running"?i.grounded&&(i.vy=-450,i.grounded=!1,i.jumping=!0,i.reachedMinJump=!1,i.jumpStartY=i.y):e.gameState,h.preventDefault()),(h.key==="r"||h.key==="R")&&e.gameState==="gameover"&&(r(),e.gameState="running")}),document.addEventListener("keyup",h=>{h.code==="Space"&&i.jumping&&i.reachedMinJump&&i.vy<-120&&(i.vy=-120)})}function j(e,i){let r,n,t,h;e.hbOffsetX!==void 0?(r=e.x+e.hbOffsetX,n=e.y+e.hbOffsetY,t=e.hbWidth,h=e.hbHeight):(r=e.x,n=e.y,t=e.width,h=e.height);let f,o,d,m;return i.hbOffsetX!==void 0?(f=i.x+i.hbOffsetX,o=i.y+i.hbOffsetY,d=i.hbWidth,m=i.hbHeight):(f=i.x,o=i.y,d=i.width,m=i.height),!(r+t<f||r>f+d||n+h<o||n>o+m)}const I=new Image;I.src="/media/startscreen.png";const y=new Image;y.src="/media/player_run.png";const T=new Image;T.src="/media/campfire.png";const M=new Image;M.src="/media/tombstone.png";const E=new Image;E.src="/media/ground.jpg";const H=new Image;H.src="/media/background.png";const b=new Image;b.src="/media/jason_pixel.png";const O=Object.freeze(Object.defineProperty({__proto__:null,backgroundSprite:H,campfireSprite:T,groundSprite:E,jasonSprite:b,playerSprite:y,startImage:I,tombstoneSprite:M},Symbol.toStringTag,{value:"Module"}));function L(e,i,r,n,t,h){const f=i.groundSprite;if(!f.complete||f.width===0)return;if(n.gameState==="running"){const s=h;n.groundOffsetX-=n.baseSpeed*s}const o=f.width,d=t.height/96,m=t.height;let c=Math.floor(n.groundOffsetX);c<=-o*d&&(n.groundOffsetX+=o*d,c+=o*d);for(let s=c;s<r.width+o*d;s+=o*d)e.drawImage(f,s,t.y,o*d+1,m)}function Y(e,i,r,n,t){const h=i.backgroundSprite;if(!h.complete||h.width===0)return;if(n.gameState==="running"){const c=t;n.backgroundOffsetX-=n.baseSpeed*.25*c}const f=h.width,o=h.height,d=r.height/o,m=Math.ceil(f*d);n.backgroundOffsetX=Math.floor(n.backgroundOffsetX),n.backgroundOffsetX<=-m&&(n.backgroundOffsetX+=m);for(let c=n.backgroundOffsetX;c<r.width+m;c+=m)e.drawImage(h,c,0,m+1,r.height)}function w(e,i,r,n,t,h,f){const o=i.jasonSprite;if(!o.complete||o.width===0)return;const d=[{x:0,y:0,w:77,h:109},{x:82,y:0,w:82,h:109},{x:184,y:0,w:82,h:109},{x:281,y:0,w:68,h:109},{x:356,y:0,w:72,h:109},{x:436,y:0,w:81,h:109},{x:527,y:0,w:81,h:109}];w.frameIndex||(w.frameIndex=0),w.frameTimer||(w.frameTimer=0),w.frameTimer+=f*1e3,w.frameTimer>=100&&(w.frameIndex=(w.frameIndex+1)%d.length,w.frameTimer=0);const m=d[w.frameIndex],c=m.w*h,s=m.h*h,l=n.x-c-50,a=t.y-s;e.drawImage(o,m.x,m.y,m.w,m.h,l,a,c,s)}function C(e,i,r,n){e.drawImage(i.playerSprite,r.col*150,r.row*150,150,150,n.x,n.y,n.width,n.height)}function k(e,i,r,n){r.forEach(t=>{t.type==="campfire"&&(t.frameTimer+=n*1e3,t.frameTimer>=120&&(t.frame=(t.frame+1)%4,t.frameTimer=0),e.drawImage(i.campfireSprite,t.frame*150,0,150,126,Math.round(t.x),Math.round(t.y),t.width,t.height)),t.type==="tombstone"&&e.drawImage(i.tombstoneSprite,Math.round(t.x),Math.round(t.y),t.width,t.height),e.strokeStyle="red",e.lineWidth=2,e.strokeRect(Math.round(t.x+t.hbOffsetX),Math.round(t.y+t.hbOffsetY),t.hbWidth,t.hbHeight)})}function F(e,i,r,n,t){e.fillStyle="#f5f5f5",e.font=`${20*t}px system-ui`,e.textAlign="left",e.fillText("Score: "+Math.floor(r.score),16*t,32*t),e.fillStyle="#ff5252",e.textAlign="right",e.fillText("Highscore: "+Math.floor(r.highScore),i.width-16*t,32*t),r.gameState==="start"&&D(e,i,n,t),r.gameState==="gameover"&&J(e,r,i)}function D(e,i,r,n){e.fillStyle="rgba(0, 0, 0, 0.6)",e.fillRect(0,0,i.width,i.height);const t=300*n,h=300*n;e.drawImage(r.startImage,i.width/2-t/2,i.height/2-h/2-40*n,t,h),e.fillStyle="#ffffff",e.textAlign="center",e.font=`${32*n}px system-ui`,e.fillText("RUN FROM JASON",i.width/2,i.height/2+150*n),e.font=`${18*n}px system-ui`,e.fillText("Druk op SPATIE om te starten",i.width/2,i.height/2+185*n)}function J(e,i,r){e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,r.width,r.height),e.textAlign="center",e.fillStyle="#ff5252",e.font="32px system-ui",e.fillText("GAME OVER",r.width/2,r.height/2-40),e.fillStyle="#ffffff",e.font="20px system-ui",e.fillText("Score: "+Math.floor(i.score),r.width/2,r.height/2),e.fillText("Highscore: "+Math.floor(i.highScore),r.width/2,r.height/2+30),e.font="18px system-ui",e.fillText("Druk op R om opnieuw te spelen",r.width/2,r.height/2+70)}function G(e){const i=e.getContext("2d");i.imageSmoothingEnabled=!1;const r=800,n=400;let t=1,h={y:0,height:0},f=null;function o(){const s=window.innerWidth*.8,l=window.innerHeight*.6,a=r/n;let S=s,p=S/a;p>l&&(p=l,S=p*a),e.width=S,e.height=p,t=e.width/r,h={y:e.height-96*t,height:96*t},f&&(f.width=80*t,f.height=120*t,f.hbOffsetX=(f.width-56*t)/2,f.hbWidth=56*t,f.hbHeight=117*t,f.y=h.y-f.height),u.obstacles.forEach(g=>{g.type==="campfire"?(g.width=150*.45*t,g.height=120*.45*t,g.hbOffsetX=g.width*.25,g.hbOffsetY=g.height*.2,g.hbWidth=g.width*.5,g.hbHeight=g.height*.8):g.type==="tombstone"&&(g.width=48*t,g.height=80*t,g.hbOffsetX=g.width*.25,g.hbOffsetY=g.height*.2,g.hbWidth=g.width*.5,g.hbHeight=g.height*.8),g.y=h.y-g.height})}o(),window.addEventListener("resize",o),f=X(2,h.y),R(u,f,m);function d(s,l,a,S,p,g){s.clearRect(0,0,l.width,l.height),Y(s,O,l,S,g),L(s,O,l,S,p,g),k(s,O,S.obstacles,g);const _={col:a.frameIndex%5,row:Math.floor(a.frameIndex/5)};C(s,O,_,a),w(s,O,l,a,p,t,g),F(s,l,S,O,t)}function m(){u.score=0,u.baseSpeed=380,u.obstacles.length=0,u.lastTime=0,u.gameState="running",f.y=h.y-f.height,f.vy=0,f.grounded=!0,f.jumping=!1,f.reachedMinJump=!1}function c(s){if(u.lastTime===0){u.lastTime=s,requestAnimationFrame(c);return}const l=s-u.lastTime;u.lastTime=s;const a=l/1e3;if(u.gameState==="running"){W(f,a,h,1400),A(f,a),P(u.obstacles,u.baseSpeed,a,u,e.width,h.y,t);for(const S of u.obstacles)if(j(f,S)){u.gameState="gameover";break}u.score+=a*10,u.score>u.highScore&&(u.highScore=u.score)}d(i,e,f,u,h,a),requestAnimationFrame(c)}requestAnimationFrame(c)}const N=document.getElementById("gameCanvas");G(N);
