(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const f of t)if(f.type==="childList")for(const r of f.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function h(t){const f={};return t.integrity&&(f.integrity=t.integrity),t.referrerPolicy&&(f.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?f.credentials="include":t.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function n(t){if(t.ep)return;t.ep=!0;const f=h(t);fetch(t.href,f)}})();const m={gameState:"start",score:0,highScore:0,baseSpeed:380,lastTime:0,obstacles:[],groundOffsetX:0,backgroundOffsetX:0,distanceSinceLastObstacle:0,obstacleDistance:500};function b(e,i){const h=60*e,n=40*e;return{x:80,y:i-h,width:n,height:h,hbOffsetX:(n-56)/2,hbOffsetY:0,hbWidth:56,hbHeight:117,vy:0,grounded:!0,jumping:!1,reachedMinJump:!1,jumpStartY:0,frameIndex:0,frameTimer:0}}function _(e,i){return e.frameTimer+=i*1e3,e.frameTimer>=100&&(e.frameIndex=(e.frameIndex+1)%7,e.frameTimer=0),{col:e.frameIndex%5,row:Math.floor(e.frameIndex/5)}}function X(e,i,h,n){e.vy+=n*i,e.y+=e.vy*i,e.jumping&&!e.reachedMinJump&&e.jumpStartY-e.y>=60&&(e.reachedMinJump=!0),e.y+e.height>=h.y&&(e.y=h.y-e.height,e.vy=0,e.grounded=!0,e.jumping=!1),e.y+=e.vy*i,e.y+e.height>=h.y&&(e.y=h.y-e.height,e.vy=0,e.grounded=!0,e.jumping=!1)}function A(e,i,h,n=1){if(Math.random()<.6){const o=.45*n,g=150*o,u=120*o;e.push({type:"campfire",x:i+40*n,y:h-u,width:g,height:u,frame:0,frameTimer:0,hbOffsetX:g*.25,hbOffsetY:u*.2,hbWidth:g*.5,hbHeight:u*.8})}else{const f=48*n,r=80*n,o=f,g=r;e.push({type:"tombstone",x:i+40*n,y:h-g,width:o,height:g,hbOffsetX:o*.25,hbOffsetY:g*.2,hbWidth:o*.5,hbHeight:g*.8})}}function P(e,i,h,n,t,f,r=1){for(let o=e.length-1;o>=0;o--){const g=e[o];if(g.x-=i*h,g.x+g.width<0){e.splice(o,1);continue}}n.distanceSinceLastObstacle+=i*h,n.distanceSinceLastObstacle>=n.obstacleDistance&&(A(e,t,f,r),n.distanceSinceLastObstacle=0,n.obstacleDistance=(450+Math.random()*300)*r)}function W(e,i,h){document.addEventListener("keydown",f=>{f.code==="Space"&&(e.gameState==="start"?(h(),e.gameState="running"):e.gameState==="running"?i.grounded&&(i.vy=-450,i.grounded=!1,i.jumping=!0,i.reachedMinJump=!1,i.jumpStartY=i.y):e.gameState,f.preventDefault()),(f.key==="r"||f.key==="R")&&e.gameState==="gameover"&&(h(),e.gameState="running")}),document.addEventListener("keyup",f=>{f.code==="Space"&&i.jumping&&i.reachedMinJump&&i.vy<-120&&(i.vy=-120)})}function R(e,i){let h,n,t,f;e.hbOffsetX!==void 0?(h=e.x+e.hbOffsetX,n=e.y+e.hbOffsetY,t=e.hbWidth,f=e.hbHeight):(h=e.x,n=e.y,t=e.width,f=e.height);let r,o,g,u;return i.hbOffsetX!==void 0?(r=i.x+i.hbOffsetX,o=i.y+i.hbOffsetY,g=i.hbWidth,u=i.hbHeight):(r=i.x,o=i.y,g=i.width,u=i.height),!(h+t<r||h>r+g||n+f<o||n>o+u)}const p=new Image;p.src="/media/startscreen.png";const I=new Image;I.src="/media/player_run.png";const y=new Image;y.src="/media/campfire.png";const M=new Image;M.src="/media/tombstone.png";const T=new Image;T.src="/media/ground.jpg";const E=new Image;E.src="/media/background.png";const O=Object.freeze(Object.defineProperty({__proto__:null,backgroundSprite:E,campfireSprite:y,groundSprite:T,playerSprite:I,startImage:p,tombstoneSprite:M},Symbol.toStringTag,{value:"Module"}));function L(e,i,h,n,t,f){const r=i.groundSprite;if(!r.complete||r.width===0)return;if(n.gameState==="running"){const c=f;n.groundOffsetX-=n.baseSpeed*c}const o=r.width,g=t.height/96,u=t.height;let s=Math.floor(n.groundOffsetX);s<=-o*g&&(n.groundOffsetX+=o*g,s+=o*g);for(let c=s;c<h.width+o*g;c+=o*g)e.drawImage(r,c,t.y,o*g+1,u)}function C(e,i,h,n,t){const f=i.backgroundSprite;if(!f.complete||f.width===0)return;if(n.gameState==="running"){const s=t;n.backgroundOffsetX-=n.baseSpeed*.25*s}const r=f.width,o=f.height,g=h.height/o,u=Math.ceil(r*g);n.backgroundOffsetX=Math.floor(n.backgroundOffsetX),n.backgroundOffsetX<=-u&&(n.backgroundOffsetX+=u);for(let s=n.backgroundOffsetX;s<h.width+u;s+=u)e.drawImage(f,s,0,u+1,h.height)}function Y(e,i,h,n){e.drawImage(i.playerSprite,h.col*150,h.row*150,150,150,n.x,n.y,n.width,n.height)}function k(e,i,h,n){h.forEach(t=>{t.type==="campfire"&&(t.frameTimer+=n*1e3,t.frameTimer>=120&&(t.frame=(t.frame+1)%4,t.frameTimer=0),e.drawImage(i.campfireSprite,t.frame*150,0,150,126,Math.round(t.x),Math.round(t.y),t.width,t.height)),t.type==="tombstone"&&e.drawImage(i.tombstoneSprite,Math.round(t.x),Math.round(t.y),t.width,t.height),e.strokeStyle="red",e.lineWidth=2,e.strokeRect(Math.round(t.x+t.hbOffsetX),Math.round(t.y+t.hbOffsetY),t.hbWidth,t.hbHeight)})}function F(e,i,h,n,t){e.fillStyle="#f5f5f5",e.font=`${20*t}px system-ui`,e.textAlign="left",e.fillText("Score: "+Math.floor(h.score),16*t,32*t),e.fillStyle="#ff5252",e.textAlign="right",e.fillText("Highscore: "+Math.floor(h.highScore),i.width-16*t,32*t),h.gameState==="start"&&j(e,i,n,t),h.gameState==="gameover"&&D(e,h,i)}function j(e,i,h,n){e.fillStyle="rgba(0, 0, 0, 0.6)",e.fillRect(0,0,i.width,i.height);const t=300*n,f=300*n;e.drawImage(h.startImage,i.width/2-t/2,i.height/2-f/2-40*n,t,f),e.fillStyle="#ffffff",e.textAlign="center",e.font=`${32*n}px system-ui`,e.fillText("RUN FROM JASON",i.width/2,i.height/2+150*n),e.font=`${18*n}px system-ui`,e.fillText("Druk op SPATIE om te starten",i.width/2,i.height/2+185*n)}function D(e,i,h){e.fillStyle="rgba(0, 0, 0, 0.7)",e.fillRect(0,0,h.width,h.height),e.textAlign="center",e.fillStyle="#ff5252",e.font="32px system-ui",e.fillText("GAME OVER",h.width/2,h.height/2-40),e.fillStyle="#ffffff",e.font="20px system-ui",e.fillText("Score: "+Math.floor(i.score),h.width/2,h.height/2),e.fillText("Highscore: "+Math.floor(i.highScore),h.width/2,h.height/2+30),e.font="18px system-ui",e.fillText("Druk op R om opnieuw te spelen",h.width/2,h.height/2+70)}function J(e){const i=e.getContext("2d");i.imageSmoothingEnabled=!1;const h=800,n=400;let t=1,f={y:0,height:0},r=null;function o(){const c=window.innerWidth*.8,a=window.innerHeight*.6,l=h/n;let w=c,S=w/l;S>a&&(S=a,w=S*l),e.width=w,e.height=S,t=e.width/h,f={y:e.height-96*t,height:96*t},r&&(r.width=80*t,r.height=120*t,r.hbOffsetX=(r.width-56*t)/2,r.hbWidth=56*t,r.hbHeight=117*t,r.y=f.y-r.height),m.obstacles.forEach(d=>{d.type==="campfire"?(d.width=150*.45*t,d.height=120*.45*t,d.hbOffsetX=d.width*.25,d.hbOffsetY=d.height*.2,d.hbWidth=d.width*.5,d.hbHeight=d.height*.8):d.type==="tombstone"&&(d.width=48*t,d.height=80*t,d.hbOffsetX=d.width*.25,d.hbOffsetY=d.height*.2,d.hbWidth=d.width*.5,d.hbHeight=d.height*.8),d.y=f.y-d.height})}o(),window.addEventListener("resize",o),r=b(2,f.y),W(m,r,u);function g(c,a,l,w,S,d){c.clearRect(0,0,a.width,a.height),C(c,O,a,w,d),L(c,O,a,w,S,d),k(c,O,w.obstacles,d);const H={col:l.frameIndex%5,row:Math.floor(l.frameIndex/5)};Y(c,O,H,l),F(c,a,w,O,t)}function u(){m.score=0,m.baseSpeed=380,m.obstacles.length=0,m.lastTime=0,m.gameState="running",r.y=f.y-r.height,r.vy=0,r.grounded=!0,r.jumping=!1,r.reachedMinJump=!1}function s(c){if(m.lastTime===0){m.lastTime=c,requestAnimationFrame(s);return}const a=c-m.lastTime;m.lastTime=c;const l=a/1e3;if(m.gameState==="running"){X(r,l,f,1400),_(r,l),P(m.obstacles,m.baseSpeed,l,m,e.width,f.y,t);for(const w of m.obstacles)if(R(r,w)){m.gameState="gameover";break}m.score+=l*10,m.score>m.highScore&&(m.highScore=m.score)}g(i,e,r,m,f,l),requestAnimationFrame(s)}requestAnimationFrame(s)}const G=document.getElementById("gameCanvas");J(G);
